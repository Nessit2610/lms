<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test WebSocket</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>

<body>
    <h2>WebSocket STOMP Test</h2>
    <button onclick="connect()">Kết nối</button>
    <ul id="messages"></ul>

    <script>
        let stompClient = null;

        function connect() {
            const socket = new SockJS("http://localhost:8080/lms/ws");
            stompClient = Stomp.over(socket);
            stompClient.connect({}, function (frame) {
                console.log("Kết nối thành công: " + frame);
                stompClient.subscribe("/topic/comments", function (message) {
                    const content = JSON.parse(message.body);
                    const li = document.createElement("li");
                    li.innerText = content.detail;
                    document.getElementById("messages").appendChild(li);
                });
            });
        }

    </script>
</body>

</html>